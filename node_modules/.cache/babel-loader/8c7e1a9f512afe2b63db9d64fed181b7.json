{"ast":null,"code":"var _jsxFileName = \"/Users/lbasiu/Documents/Work/developers-hub-frontend/src/components/dialogs/deleteDialog.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useParams } from \"react-router\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport Error from \"../../components/error/error.component\";\nimport Dialog from \"./dialog.component\";\nimport Announcement from '../announcement/announcement.component';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst DeleteDialog = _ref => {\n  _s();\n\n  let {\n    addAnnouncement,\n    deleteApplication,\n    id,\n    name\n  } = _ref;\n  const [open, setOpen] = useState(false);\n  const {\n    apiId\n  } = useParams();\n  const apiUrl = `${process.env.REACT_APP_API_URL || `http://${window.location.hostname}:8000/api/v1`}/${apiId}`;\n\n  const onConfirmDelete = () => {\n    axios.delete(`${apiUrl}/application/${id}`, {\n      headers: {\n        'Authorization': Cookies.get('hackneyToken')\n      }\n    }).then(() => {\n      const announcement = /*#__PURE__*/_jsxDEV(Announcement, {\n        title: \"Deletion successful!\",\n        children: [\"You have successfully removed \", /*#__PURE__*/_jsxDEV(\"b\", {\n          className: \"lbh-body lbh-!-font-weight-bold\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 47\n        }, this), \" from this API.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 34\n      }, this);\n\n      addAnnouncement(announcement);\n      deleteApplication(name);\n      setOpen(false);\n    }).catch(error => {\n      const deleteError = /*#__PURE__*/_jsxDEV(Error, {\n        title: \"Oops! Something went wrong when deleting this application!\",\n        summary: error.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 33\n      }, this);\n\n      addAnnouncement(deleteError);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(!open),\n      className: \"lbh-link lbh-link--no-visited-state delete-link\",\n      children: [\"Delete\", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"govuk-visually-hidden\",\n        children: \" application\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      title: \"Are you sure?\",\n      isOpen: open,\n      onDismiss: () => setOpen(false),\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"lbh-body\",\n        children: [\"You are about to permanently remove \", /*#__PURE__*/_jsxDEV(\"b\", {\n          className: \"lbh-body lbh-!-font-weight-bold\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 57\n        }, this), \" from this API.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 129\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lbh-dialog__actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirmDelete,\n          className: \"govuk-button lbh-button\",\n          children: \"Yes, remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setOpen(false),\n          className: \"lbh-link lbh-link--no-visited-state\",\n          children: \"No, cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(DeleteDialog, \"/+4hIOQRXqmZUI17c4+9eDjeqLY=\", false, function () {\n  return [useParams];\n});\n\n_c = DeleteDialog;\nexport default DeleteDialog;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteDialog\");","map":{"version":3,"names":["React","useState","useParams","axios","Cookies","Error","Dialog","Announcement","DeleteDialog","addAnnouncement","deleteApplication","id","name","open","setOpen","apiId","apiUrl","process","env","REACT_APP_API_URL","window","location","hostname","onConfirmDelete","delete","headers","get","then","announcement","catch","error","deleteError","message"],"sources":["/Users/lbasiu/Documents/Work/developers-hub-frontend/src/components/dialogs/deleteDialog.component.jsx"],"sourcesContent":["import React, { useState } from \"react\"\nimport { useParams } from \"react-router\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport Error from \"../../components/error/error.component\";\n\nimport Dialog from \"./dialog.component\"\nimport Announcement from '../announcement/announcement.component';\n\nconst DeleteDialog = ({addAnnouncement, deleteApplication, id, name}) => {\n    const [open, setOpen] = useState(false)\n    const { apiId } = useParams();\n    const apiUrl = `${process.env.REACT_APP_API_URL || `http://${window.location.hostname}:8000/api/v1`}/${apiId}`\n\n    const onConfirmDelete = () => {\n        axios.delete(`${apiUrl}/application/${id}`, { headers: { 'Authorization': Cookies.get('hackneyToken') }})\n        .then(() => {\n            const announcement = <Announcement title=\"Deletion successful!\">\n                You have successfully removed <b className='lbh-body lbh-!-font-weight-bold'>{name}</b> from this API.\n            </Announcement>\n\n            addAnnouncement(announcement);\n            deleteApplication(name);\n            setOpen(false);\n        })\n        .catch((error) => {\n            const deleteError = <Error title=\"Oops! Something went wrong when deleting this application!\" summary={error.message} />\n            addAnnouncement(deleteError);\n        });\n    }\n\n    return (\n        <>\n            <button\n                onClick={() => setOpen(!open)}\n                className=\"lbh-link lbh-link--no-visited-state delete-link\"\n            >\n                Delete<span className=\"govuk-visually-hidden\"> application</span>\n            </button>\n\n            <Dialog\n                title=\"Are you sure?\"\n                isOpen={open}\n                onDismiss={() => setOpen(false)}\n            >\n                <p className=\"lbh-body\">\n                    You are about to permanently remove <b className='lbh-body lbh-!-font-weight-bold'>{name}</b> from this API.<br/>\n                </p>\n                <div className=\"lbh-dialog__actions\">\n                    <button\n                        onClick={onConfirmDelete}\n                        className=\"govuk-button lbh-button\"\n                    >\n                        Yes, remove\n                    </button>\n\n                    <button\n                        onClick={() => setOpen(false)}\n                        className=\"lbh-link lbh-link--no-visited-state\"\n                    >\n                        No, cancel\n                    </button>\n                </div>\n            </Dialog>\n        </>\n    )\n}\n\nexport default DeleteDialog\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,wCAAlB;AAEA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;;;;AAEA,MAAMC,YAAY,GAAG,QAAoD;EAAA;;EAAA,IAAnD;IAACC,eAAD;IAAkBC,iBAAlB;IAAqCC,EAArC;IAAyCC;EAAzC,CAAmD;EACrE,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,KAAD,CAAhC;EACA,MAAM;IAAEc;EAAF,IAAYb,SAAS,EAA3B;EACA,MAAMc,MAAM,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,IAAkC,UAASC,MAAM,CAACC,QAAP,CAAgBC,QAAS,cAAc,IAAGP,KAAM,EAA7G;;EAEA,MAAMQ,eAAe,GAAG,MAAM;IAC1BpB,KAAK,CAACqB,MAAN,CAAc,GAAER,MAAO,gBAAeL,EAAG,EAAzC,EAA4C;MAAEc,OAAO,EAAE;QAAE,iBAAiBrB,OAAO,CAACsB,GAAR,CAAY,cAAZ;MAAnB;IAAX,CAA5C,EACCC,IADD,CACM,MAAM;MACR,MAAMC,YAAY,gBAAG,QAAC,YAAD;QAAc,KAAK,EAAC,sBAApB;QAAA,0DACa;UAAG,SAAS,EAAC,iCAAb;UAAA,UAAgDhB;QAAhD;UAAA;UAAA;UAAA;QAAA,QADb;MAAA;QAAA;QAAA;QAAA;MAAA,QAArB;;MAIAH,eAAe,CAACmB,YAAD,CAAf;MACAlB,iBAAiB,CAACE,IAAD,CAAjB;MACAE,OAAO,CAAC,KAAD,CAAP;IACH,CATD,EAUCe,KAVD,CAUQC,KAAD,IAAW;MACd,MAAMC,WAAW,gBAAG,QAAC,KAAD;QAAO,KAAK,EAAC,4DAAb;QAA0E,OAAO,EAAED,KAAK,CAACE;MAAzF;QAAA;QAAA;QAAA;MAAA,QAApB;;MACAvB,eAAe,CAACsB,WAAD,CAAf;IACH,CAbD;EAcH,CAfD;;EAiBA,oBACI;IAAA,wBACI;MACI,OAAO,EAAE,MAAMjB,OAAO,CAAC,CAACD,IAAF,CAD1B;MAEI,SAAS,EAAC,iDAFd;MAAA,kCAIU;QAAM,SAAS,EAAC,uBAAhB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAJV;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAQI,QAAC,MAAD;MACI,KAAK,EAAC,eADV;MAEI,MAAM,EAAEA,IAFZ;MAGI,SAAS,EAAE,MAAMC,OAAO,CAAC,KAAD,CAH5B;MAAA,wBAKI;QAAG,SAAS,EAAC,UAAb;QAAA,gEACwC;UAAG,SAAS,EAAC,iCAAb;UAAA,UAAgDF;QAAhD;UAAA;UAAA;UAAA;QAAA,QADxC,kCACgH;UAAA;UAAA;UAAA;QAAA,QADhH;MAAA;QAAA;QAAA;QAAA;MAAA,QALJ,eAQI;QAAK,SAAS,EAAC,qBAAf;QAAA,wBACI;UACI,OAAO,EAAEW,eADb;UAEI,SAAS,EAAC,yBAFd;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADJ,eAQI;UACI,OAAO,EAAE,MAAMT,OAAO,CAAC,KAAD,CAD1B;UAEI,SAAS,EAAC,qCAFd;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QARJ;MAAA;QAAA;QAAA;QAAA;MAAA,QARJ;IAAA;MAAA;MAAA;MAAA;IAAA,QARJ;EAAA,gBADJ;AAmCH,CAzDD;;GAAMN,Y;UAEgBN,S;;;KAFhBM,Y;AA2DN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}