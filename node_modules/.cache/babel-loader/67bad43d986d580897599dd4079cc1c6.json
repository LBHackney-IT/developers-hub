{"ast":null,"code":"var _jsxFileName = \"/Users/lbasiu/Documents/developers-hub-frontend/src/context/user.context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { createContext, useContext, useState, useCallback } from \"react\";\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext(null); // Create Usercontext\n\nconst parseToken = () => {\n  const token = Cookies.get('hackneyToken') || null;\n\n  try {\n    const decodedToken = jwtDecode(token);\n    return decodedToken;\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const UserProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  // decode cookie value\n  const [user, setUser] = useState(parseToken());\n  const logoutUser = useCallback(() => {\n    setUser(null); // delete cookie\n\n    Cookies.remove('hackneyToken', {\n      domain: 'hackney.gov.uk'\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      logout: logoutUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 10\n  }, this);\n};\n\n_s(UserProvider, \"3OH4P5UTm7GwQDySZwtI+aaeIFg=\");\n\n_c = UserProvider;\nexport const useUser = () => {\n  _s2();\n\n  const {\n    user\n  } = useContext(UserContext);\n  return user;\n}; // export logout functionality\n\n_s2(useUser, \"y3FQDew7UyrSqYkvQcTdCsLbAB8=\");\n\nexport const SignOut = () => {\n  _s3();\n\n  const {\n    logout\n  } = useContext(UserContext);\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: logout,\n    className: \"nav-item lbh-body-m\",\n    style: {\n      background: 'transparent',\n      border: 'none'\n    },\n    children: \"SIGN OUT\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 10\n  }, this);\n};\n\n_s3(SignOut, \"BmDOwLE8D2PZUdjfQ8NTlIR7vUw=\");\n\n_c2 = SignOut;\nexport default UserContext;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserProvider\");\n$RefreshReg$(_c2, \"SignOut\");","map":{"version":3,"names":["createContext","useContext","useState","useCallback","Cookies","jwtDecode","UserContext","parseToken","token","get","decodedToken","e","UserProvider","children","user","setUser","logoutUser","remove","domain","logout","useUser","SignOut","background","border"],"sources":["/Users/lbasiu/Documents/developers-hub-frontend/src/context/user.context.js"],"sourcesContent":["import { createContext, useContext, useState, useCallback } from \"react\";\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\n\nconst UserContext = createContext(null);\n\n// Create Usercontext\n\nconst parseToken = () => {\n    const token = Cookies.get('hackneyToken') || null;\n\n    try {\n      const decodedToken = jwtDecode(token);\n      return decodedToken;\n    } catch(e) {\n      return null;\n    }\n}\n\nexport const UserProvider = ({ children }) => {\n  // decode cookie value\n  const [ user, setUser ]= useState(parseToken())\n\n  const logoutUser = useCallback(() => {\n    setUser(null);\n    // delete cookie\n    Cookies.remove('hackneyToken', {domain: 'hackney.gov.uk'});\n  }, [])\n\n  return <UserContext.Provider value={{ user, logout: logoutUser }}>{children}</UserContext.Provider>;\n}\n\nexport const useUser = () => {\n  const { user } = useContext(UserContext);\n  return user;\n}\n// export logout functionality\n\nexport const SignOut = () => {\n  const { logout } = useContext(UserContext);\n  return <button onClick={logout} className=\"nav-item lbh-body-m\" style={{background:'transparent', border:'none'}}>SIGN OUT</button>;\n}\n\nexport default UserContext\n"],"mappings":";;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,QAApC,EAA8CC,WAA9C,QAAiE,OAAjE;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAEA,MAAMC,WAAW,gBAAGN,aAAa,CAAC,IAAD,CAAjC,C,CAEA;;AAEA,MAAMO,UAAU,GAAG,MAAM;EACrB,MAAMC,KAAK,GAAGJ,OAAO,CAACK,GAAR,CAAY,cAAZ,KAA+B,IAA7C;;EAEA,IAAI;IACF,MAAMC,YAAY,GAAGL,SAAS,CAACG,KAAD,CAA9B;IACA,OAAOE,YAAP;EACD,CAHD,CAGE,OAAMC,CAAN,EAAS;IACT,OAAO,IAAP;EACD;AACJ,CATD;;AAWA,OAAO,MAAMC,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;EAC5C;EACA,MAAM,CAAEC,IAAF,EAAQC,OAAR,IAAmBb,QAAQ,CAACK,UAAU,EAAX,CAAjC;EAEA,MAAMS,UAAU,GAAGb,WAAW,CAAC,MAAM;IACnCY,OAAO,CAAC,IAAD,CAAP,CADmC,CAEnC;;IACAX,OAAO,CAACa,MAAR,CAAe,cAAf,EAA+B;MAACC,MAAM,EAAE;IAAT,CAA/B;EACD,CAJ6B,EAI3B,EAJ2B,CAA9B;EAMA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEJ,IAAF;MAAQK,MAAM,EAAEH;IAAhB,CAA7B;IAAA,UAA4DH;EAA5D;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAXM;;GAAMD,Y;;KAAAA,Y;AAab,OAAO,MAAMQ,OAAO,GAAG,MAAM;EAAA;;EAC3B,MAAM;IAAEN;EAAF,IAAWb,UAAU,CAACK,WAAD,CAA3B;EACA,OAAOQ,IAAP;AACD,CAHM,C,CAIP;;IAJaM,O;;AAMb,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAC3B,MAAM;IAAEF;EAAF,IAAalB,UAAU,CAACK,WAAD,CAA7B;EACA,oBAAO;IAAQ,OAAO,EAAEa,MAAjB;IAAyB,SAAS,EAAC,qBAAnC;IAAyD,KAAK,EAAE;MAACG,UAAU,EAAC,aAAZ;MAA2BC,MAAM,EAAC;IAAlC,CAAhE;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAHM;;IAAMF,O;;MAAAA,O;AAKb,eAAef,WAAf"},"metadata":{},"sourceType":"module"}